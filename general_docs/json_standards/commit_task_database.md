# commit_task_database.json Standard

## Purpose

The `commit_task_database.json` file is a critical component in the Project Management System that maps each Git commit to specific project tasks. It enables precise tracking of progress by associating commits with tasks and quantifying how much each commit advances the project. This file also integrates directly with the workflow, reflecting how task states change as commits are made according to defined standards.

---

## Automatic Generation and Commit Standards

The `commit_task_database.json` file is fully automatically generated by the `auto_commit.py` module during the commit process. To ensure accurate progress tracking and workflow integration, the following standards must be adhered to:

- **Commit Message Format:** Commit messages must follow the project's conventional commit style, including task identifiers and clear descriptions.
- **Commit Timing:** Commits should be made at logical points in the task lifecycle, such as after completing a feature, fixing a bug, or finishing a review.
- **Commit Content:** Commits should be atomic and focused on a single task or change to enable precise progress mapping.
- **Workflow Integration:** Commits must correspond to workflow stages defined in `workflow_definition.json`, triggering appropriate workflow transitions.

---

## Structure

The file is a JSON object where each key is a commit hash, and the value is an object containing detailed metadata about the commit and its associated task.

### Fields:

- `task_id` (string): Identifier of the task associated with the commit.
- `file_path` (string): Path of the file changed in the commit.
- `commit_message` (string): The commit message describing the change.
- `timestamp` (string): Timestamp of the commit.
- `author` (string): Author name of the commit.
- `email` (string): Author email.
- `date` (string): Commit date.
- `branch` (string): Git branch containing the commit.
- `parent_commits` (array of strings): Parent commit hashes.

Example snippet:

```json
{
  "a1b2c3d4e5f6g7h8i9j0": {
    "task_id": "TASK-123",
    "file_path": "project_inputs/modules/task_management.py",
    "commit_message": "âœ¨ feat(TASK-123): Implement task assignment logic",
    "timestamp": "2025-07-10 12:34:56",
    "author": "Alice Johnson",
    "email": "alice.johnson@example.com",
    "date": "2025-07-10",
    "branch": "main",
    "parent_commits": ["z9y8x7w6v5u4t3s2r1q0"]
  }
}
```

---

## Commit-Task Progress Mapping

Each commit linked to a task represents a quantifiable progress increment toward completing that task and, by extension, the overall project. The system calculates progress percentages based on commit content, task complexity, and workflow stage.

- When a commit is made against a task, the system updates the progress percentage for that task.
- The progress increment can vary depending on the nature of the commit (e.g., bug fix, feature addition, documentation).
- The cumulative progress of all commits on a task reflects the task's completion status.
- The progress percentage contributed by a commit is weighted according to the workflow stage it corresponds to.

---

## Integration with Workflow

The `commit_task_database.json` file is tightly integrated with the project's workflow, defined in `workflow_definition.json`. When a commit is registered:

- The system determines the current workflow stage of the task.
- Based on the commit type and standards, the task's workflow stage may advance (e.g., from "In Progress" to "Code Review").
- The progress weights defined in the workflow stages influence how much progress the commit contributes.
- This integration ensures that commit activity directly reflects and drives workflow transitions.
- The commit triggers an update in the workflow state of the task, reflecting the new progress.

---

## Example Workflow Impact

Suppose the workflow stages are:

1. To Do (weight 0.0)
2. In Progress (weight 0.3)
3. Code Review (weight 0.7)
4. Done (weight 1.0)

A commit that moves a task from "In Progress" to "Code Review" would increase the task's progress from 30% to 70%, advancing the workflow accordingly.

---

## Usage and Maintenance

- The `auto_commit.py` module automatically updates this file during commit operations.
- It is essential to maintain accurate commit messages following the project's commit standards to ensure correct task mapping.
- Commits should be made at appropriate workflow stages to reflect true progress.
- Regular audits of this file help maintain project progress accuracy and traceability.

---

## Summary

The `commit_task_database.json` file is vital for linking code commits to project tasks, quantifying progress, and reflecting workflow changes. Proper use and maintenance of this file enable precise project tracking and management.

